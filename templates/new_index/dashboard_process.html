{% extends 'new_index/base1.html' %}
{% load widget_tweaks %}
{% load static %}

{% block extrahead %}
<link href="/static/css/bs_datetimepicker.min.css" rel="stylesheet" >
<style>
    /* .navbar-expand{
        flex-wrap: nowrap;
        display: flex;
        justify-content: space-between;
    }
    a{
        text-decoration:none;
    }
    .sd-page.sd-body__page.sd-page__empty-header{
        background-color: white;
    }
    .sd-action-bar.sd-footer.sd-body__navigation.sd-clearfix{
        display: none;
    }

    
    a.active {
        border-bottom: 2px solid blue!important;
        background-color:transparent!important;
    }

    .nav-link {
    color: rgb(110, 110, 110);
    font-weight: 500;
    }
    .nav-link:hover {
    color: #55c57a;
    }

    .nav-pills .nav-link.active {
    color: black;
    background-color: white;
    border-radius: 0.5rem 0.5rem 0 0;
    font-weight: 600;
    }

    /* ul {
    list-style: none;
    margin-top: 1rem;
    padding-inline-start: 0;
    } */

    .table-striped > tbody > tr:nth-child(2n+1) > td, .table-striped > tbody > tr:nth-child(2n+1) > th {
        background-color: #d9ecff;
    }
   
    .aktif{
        color: #33cc33;
    }
    .aktif-striped{
        color: #33cc33;
    } */
    .gridStyle {
        border: 1px solid rgb(212,212,212);
        width: 100%; 
        height: 200px;
    }
</style>
{% endblock %} 
    {% block navbar %}
    {% include 'new_index/parts/navbar_kosong.html' %}
    {% endblock %}
    {% block konten_isi %}
    {% comment %} <div class="container-fluid"> {% endcomment %}
    <div class="card">
        <div class="card-header">
            <div class="row">
                <div class="col-md-12">
                    <div class="card card-default">
                        <div class="card-header">
                            <h1 style="color: rgb(0,114,228);font-size: 24px;font-weight: bold;">Dashboard Process		
                            </h1>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-12 col-sm-12 table-responsive">
                                        <div class="form-group form-inline">
                                            <label for="nmlelang">Judul Seleksi&nbsp;</label>
                                            <select class="form-control" id="nmlelang" style="width:600px" ></select>
                                            <input type="hidden" id="item_lelang">
                                        </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card-body">        
            <div class="row">
                <ul class="nav nav-tabs col-md-12" id="myTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="pill" href="#home" role="tab">Obyek Seleksi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-bold" data-toggle="pill" href="#tahapan" role="tab">Tahapan Seleksi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-bold" data-toggle="pill" href="#proses" role="tab">Posisi Proses Seleksi </a>
                    </li>
                </ul>
                <!-- Tab panes -->
                <div class="tab-content col-md-12">
                    <div class="tab-pane fade show active" id="home" role="tabpanel">
                        <div class="card">
                            <div class="card-header">
                                <div class="col-md-12 col-sm-12 table-responsive">
                                    <div class="form-group form-inline">
                                        <h2 style="color: rgb(0,114,228);font-size: 16px;font-weight: bold;">Obyek Seleksi&nbsp;</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="col">
                                    <table  id="obyek" class="dt">
                                        <thead>
                                            <tr>
                                                <th>Band</th>
                                                <th>Rentang Frekuensi</th>
                                                <th>Teknologi</th>
                                                <th>Reserved Price</th>
                                                <th>Eligibility/Block</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane" id="tahapan" role="tabpanel">
                        <div class="card">
                            <div class="card-header">
                                <div class="col-md-12 col-sm-12 table-responsive">
                                    <div class="form-group form-inline">
                                        <h2 style="color: rgb(0,114,228);font-size: 16px;font-weight: bold;">Jadwal Putaran Lelang&nbsp;</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="col">
                                    <table  id="t_tahapan" class="dt">
                                        <thead>
                                            <tr>
                                                <th>item_lelang</th>
                                                <th>item_detail_lelang</th>
                                                <th>persyaratan</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div> 
                    </div>
                    <div class="tab-pane" id="proses" role="tabpanel">
                        <div class="card">
                            <div class="card-header">
                                <div class="col-md-12 col-sm-12 table-responsive">
                                    <div class="form-group form-inline">
                                        <h2 style="color: rgb(0,114,228);font-size: 16px;font-weight: bold;">Flow State&nbsp;</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="col">
                                    <table  id="t_proses" class="dt">
                                        <thead>
                                            <tr>
                                                <th>item_lelang</th>
                                                <th>item_detail_lelang</th>
                                                <th>persyaratan</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div> 
                      </div>
                    </div>
                </div>
            </div>    
        </div>
    </div>
    <div class="modal fade" tabindex="-1" role="dialog" id="modal">
        <div class="modal-dialog" role="document">
          <div class="modal-content"></div>
        </div>
      </div>
{% endblock %}
{% block script %}
<script src="/static/js/bs_datetimepicker.js"></script>
<script>
$(document).ready(function() {
    $('#nmlelang').select2({
    ajax: {
      url: '/adm_lelang/api/v1/item_lelang',
      processResults: function (data) {
        return {results: $.map(data.results, function (item) {
            return {
                text: item.nama_lelang,
                id: item.id
                }
            })
        }}
    }
  });
  function loadData(id) {
    $.ajax({
        url: '/adm_lelang/adm_lelang/detail_itemlelang2/'+id + '/',
        method: "GET",
        xhrFields: {
            withCredentials: true
        },
        success: function (data) {
            var table = $("#obyek");
            table.empty();
            table.append(data);
/*            $.each(data.results, function (a,b) {
                table.append("<tr><td>"+b.eligibility_point_per_block+"</td>" +
                    "<td>"+b.teknologi+"</td>"+
                    "<td>" + b.reserved_price + "</td>" +
                    "<td>" + b.band + "</td>" +
                    "<td>" + b.rentang_frekuensi + "</td></tr>");
            });*/
            $("#obyek").DataTable();
        }
    });
  }
  
  var id = $('#nmlelang').find(':selected').val();
  function loadData_Tahapan(id) {
    $.ajax({
        url: '/adm_lelang/adm_lelang/jadwal_lelang2/'+id + '/',
        method: "GET",
        xhrFields: {
            withCredentials: true
        },
        success: function (data) {
            var table = $("#t_tahapan");
            table.empty();
            table.append(data);
            $("#t_tahapan").DataTable();
        }
    });
  }
  function loadData_Proses(id) {
    $.ajax({
        url: '/adm_lelang/adm_lelang/flow_state/'+id + '/',
        method: "GET",
        xhrFields: {
            withCredentials: true
        },
        success: function (data) {
            var table = $("#t_proses");
            table.empty();
            table.append(data);
            $("#t_proses").DataTable();
        }
    });
  }
  $('#nmlelang').on('select2:select', function (e) {
    var id = e.params.data.id;
    $("#item_lelang").val(id);
    loadData(id);
    loadData_Tahapan(id);
    loadData_Proses(id);
  });
  $(".dt").DataTable({paging: false, ordering: false,info: false,searching: false});


});
</script>
{% endblock %}